<!DOCTYPE html>
<html lang="zh-CN">
<link rel="stylesheet" href="/css/custom.css">
<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://logxin.cc/favicon.ico" />
<title>Hugo 添加 Giscus 评论保姆级教程（基于 Bearblog 主题） | logxin</title>
<meta name="title" content="Hugo 添加 Giscus 评论保姆级教程（基于 Bearblog 主题）" />
<meta name="description" content="Hugo 添加 Giscus 评论保姆级教程（基于 Bearblog 主题）
这篇文章手把手带你在 Hugo 博客里集成 Giscus（基于 GitHub Discussions 的评论系统）。
适用对象：使用 hugo-bearblog 主题或任意支持 layouts/partials/custom_body.html 扩展点的主题。

一、准备工作（一次性）


打开 https://giscus.app/zh-CN 并使用 GitHub 登录。


安装 “giscus” GitHub App 到你的仓库（例如 xin0712/logxin.cc）。


在仓库启用 Discussions：



仓库 → Settings → General → Features → 勾选 “Discussions”。
仓库顶栏进入 “Discussions”，新建一个分类（推荐 “Q&amp;A” 或 “Comments”）。


回到 giscus.app 页面：


仓库填 xin0712/logxin.cc，映射方式选 pathname。
分类选择刚创建的 &ldquo;Q&amp;A&rdquo;。
语言选中文，主题按需（建议 preferred_color_scheme）。
页面底部会生成一段 &lt;script&gt;，包含 repoId、category、categoryId 等参数。

示例（请以你在 giscus.app 实际生成的为准）：
 1&lt;script src=&#34;https://giscus.app/client.js&#34;
 2        data-repo=&#34;xin0712/logxin.cc&#34;
 3        data-repo-id=&#34;R_kgDOPKWTCQ&#34;
 4        data-category=&#34;Q&amp;A&#34;
 5        data-category-id=&#34;DIC_kwDOPKWTCc4CuqkD&#34;
 6        data-mapping=&#34;pathname&#34;
 7        data-strict=&#34;0&#34;
 8        data-reactions-enabled=&#34;1&#34;
 9        data-emit-metadata=&#34;1&#34;
10        data-input-position=&#34;top&#34;
11        data-theme=&#34;preferred_color_scheme&#34;
12        data-lang=&#34;zh-CN&#34;
13        data-loading=&#34;lazy&#34;
14        crossorigin=&#34;anonymous&#34;
15        async&gt;
16&lt;/script&gt;

二、在 Hugo 配置中写入 Giscus 参数
在站点配置 hugo.toml 增加：" />
<meta name="keywords" content="Hugo,评论,Giscus,教程," />


<meta property="og:url" content="https://logxin.cc/posts/hugo-giscus-comments/">
  <meta property="og:site_name" content="logxin">
  <meta property="og:title" content="Hugo 添加 Giscus 评论保姆级教程（基于 Bearblog 主题）">
  <meta property="og:description" content="Hugo 添加 Giscus 评论保姆级教程（基于 Bearblog 主题） 这篇文章手把手带你在 Hugo 博客里集成 Giscus（基于 GitHub Discussions 的评论系统）。
适用对象：使用 hugo-bearblog 主题或任意支持 layouts/partials/custom_body.html 扩展点的主题。
一、准备工作（一次性） 打开 https://giscus.app/zh-CN 并使用 GitHub 登录。
安装 “giscus” GitHub App 到你的仓库（例如 xin0712/logxin.cc）。
在仓库启用 Discussions：
仓库 → Settings → General → Features → 勾选 “Discussions”。 仓库顶栏进入 “Discussions”，新建一个分类（推荐 “Q&amp;A” 或 “Comments”）。 回到 giscus.app 页面： 仓库填 xin0712/logxin.cc，映射方式选 pathname。 分类选择刚创建的 “Q&amp;A”。 语言选中文，主题按需（建议 preferred_color_scheme）。 页面底部会生成一段 &lt;script&gt;，包含 repoId、category、categoryId 等参数。 示例（请以你在 giscus.app 实际生成的为准）：
1&lt;script src=&#34;https://giscus.app/client.js&#34; 2 data-repo=&#34;xin0712/logxin.cc&#34; 3 data-repo-id=&#34;R_kgDOPKWTCQ&#34; 4 data-category=&#34;Q&amp;A&#34; 5 data-category-id=&#34;DIC_kwDOPKWTCc4CuqkD&#34; 6 data-mapping=&#34;pathname&#34; 7 data-strict=&#34;0&#34; 8 data-reactions-enabled=&#34;1&#34; 9 data-emit-metadata=&#34;1&#34; 10 data-input-position=&#34;top&#34; 11 data-theme=&#34;preferred_color_scheme&#34; 12 data-lang=&#34;zh-CN&#34; 13 data-loading=&#34;lazy&#34; 14 crossorigin=&#34;anonymous&#34; 15 async&gt; 16&lt;/script&gt; 二、在 Hugo 配置中写入 Giscus 参数 在站点配置 hugo.toml 增加：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-27T23:00:00+08:00">
    <meta property="article:modified_time" content="2025-08-27T23:00:00+08:00">
    <meta property="article:tag" content="Hugo">
    <meta property="article:tag" content="评论">
    <meta property="article:tag" content="Giscus">
    <meta property="article:tag" content="教程">




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Hugo 添加 Giscus 评论保姆级教程（基于 Bearblog 主题）">
  <meta name="twitter:description" content="Hugo 添加 Giscus 评论保姆级教程（基于 Bearblog 主题） 这篇文章手把手带你在 Hugo 博客里集成 Giscus（基于 GitHub Discussions 的评论系统）。
适用对象：使用 hugo-bearblog 主题或任意支持 layouts/partials/custom_body.html 扩展点的主题。
一、准备工作（一次性） 打开 https://giscus.app/zh-CN 并使用 GitHub 登录。
安装 “giscus” GitHub App 到你的仓库（例如 xin0712/logxin.cc）。
在仓库启用 Discussions：
仓库 → Settings → General → Features → 勾选 “Discussions”。 仓库顶栏进入 “Discussions”，新建一个分类（推荐 “Q&amp;A” 或 “Comments”）。 回到 giscus.app 页面： 仓库填 xin0712/logxin.cc，映射方式选 pathname。 分类选择刚创建的 “Q&amp;A”。 语言选中文，主题按需（建议 preferred_color_scheme）。 页面底部会生成一段 &lt;script&gt;，包含 repoId、category、categoryId 等参数。 示例（请以你在 giscus.app 实际生成的为准）：
1&lt;script src=&#34;https://giscus.app/client.js&#34; 2 data-repo=&#34;xin0712/logxin.cc&#34; 3 data-repo-id=&#34;R_kgDOPKWTCQ&#34; 4 data-category=&#34;Q&amp;A&#34; 5 data-category-id=&#34;DIC_kwDOPKWTCc4CuqkD&#34; 6 data-mapping=&#34;pathname&#34; 7 data-strict=&#34;0&#34; 8 data-reactions-enabled=&#34;1&#34; 9 data-emit-metadata=&#34;1&#34; 10 data-input-position=&#34;top&#34; 11 data-theme=&#34;preferred_color_scheme&#34; 12 data-lang=&#34;zh-CN&#34; 13 data-loading=&#34;lazy&#34; 14 crossorigin=&#34;anonymous&#34; 15 async&gt; 16&lt;/script&gt; 二、在 Hugo 配置中写入 Giscus 参数 在站点配置 hugo.toml 增加：">




  <meta itemprop="name" content="Hugo 添加 Giscus 评论保姆级教程（基于 Bearblog 主题）">
  <meta itemprop="description" content="Hugo 添加 Giscus 评论保姆级教程（基于 Bearblog 主题） 这篇文章手把手带你在 Hugo 博客里集成 Giscus（基于 GitHub Discussions 的评论系统）。
适用对象：使用 hugo-bearblog 主题或任意支持 layouts/partials/custom_body.html 扩展点的主题。
一、准备工作（一次性） 打开 https://giscus.app/zh-CN 并使用 GitHub 登录。
安装 “giscus” GitHub App 到你的仓库（例如 xin0712/logxin.cc）。
在仓库启用 Discussions：
仓库 → Settings → General → Features → 勾选 “Discussions”。 仓库顶栏进入 “Discussions”，新建一个分类（推荐 “Q&amp;A” 或 “Comments”）。 回到 giscus.app 页面： 仓库填 xin0712/logxin.cc，映射方式选 pathname。 分类选择刚创建的 “Q&amp;A”。 语言选中文，主题按需（建议 preferred_color_scheme）。 页面底部会生成一段 &lt;script&gt;，包含 repoId、category、categoryId 等参数。 示例（请以你在 giscus.app 实际生成的为准）：
1&lt;script src=&#34;https://giscus.app/client.js&#34; 2 data-repo=&#34;xin0712/logxin.cc&#34; 3 data-repo-id=&#34;R_kgDOPKWTCQ&#34; 4 data-category=&#34;Q&amp;A&#34; 5 data-category-id=&#34;DIC_kwDOPKWTCc4CuqkD&#34; 6 data-mapping=&#34;pathname&#34; 7 data-strict=&#34;0&#34; 8 data-reactions-enabled=&#34;1&#34; 9 data-emit-metadata=&#34;1&#34; 10 data-input-position=&#34;top&#34; 11 data-theme=&#34;preferred_color_scheme&#34; 12 data-lang=&#34;zh-CN&#34; 13 data-loading=&#34;lazy&#34; 14 crossorigin=&#34;anonymous&#34; 15 async&gt; 16&lt;/script&gt; 二、在 Hugo 配置中写入 Giscus 参数 在站点配置 hugo.toml 增加：">
  <meta itemprop="datePublished" content="2025-08-27T23:00:00+08:00">
  <meta itemprop="dateModified" content="2025-08-27T23:00:00+08:00">
  <meta itemprop="wordCount" content="312">
  <meta itemprop="keywords" content="Hugo,评论,Giscus,教程">
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  :root {
    --width: 720px;
    --font-main: Verdana, sans-serif;
    --font-secondary: Verdana, sans-serif;
    --font-scale: 1em;
    --background-color: #fff;
    --heading-color: #222;
    --text-color: #444;
    --link-color: #3273dc;
    --visited-color: #8b6fcb;
    --code-background-color: #f2f2f2;
    --code-color: #222;
    --blockquote-color: #222;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --background-color: #01242e;
      --heading-color: #eee;
      --text-color: #ddd;
      --link-color: #8cc2dd;
      --visited-color: #8b6fcb;
      --code-background-color: #000;
      --code-color: #ddd;
      --blockquote-color: #ccc;
    }
  }

  body {
    font-family: var(--font-secondary);
    font-size: var(--font-scale);
    margin: auto;
    padding: 20px;
    max-width: var(--width);
    text-align: left;
    background-color: var(--background-color);
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: var(--text-color);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-main);
    color: var(--heading-color);
  }

  a {
    color: var(--link-color);
    cursor: pointer;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

  nav a {
    margin-right: 8px;
  }

  strong,
  b {
    color: var(--heading-color);
  }

  button {
    margin: 0;
    cursor: pointer;
  }

  time {
    font-family: monospace;
    font-style: normal;
    font-size: 15px;
  }

  main {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  hr {
    border: 0;
    border-top: 1px dashed;
  }

  img {
    max-width: 100%;
  }

  code {
    font-family: monospace;
    padding: 2px;
    background-color: var(--code-background-color);
    color: var(--code-color);
    border-radius: 3px;
  }

  blockquote {
    border-left: 1px solid #999;
    color: var(--code-color);
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px 0;
    text-align: center;
  }

  .title:hover {
    text-decoration: none;
  }

  .title h1 {
    font-size: 1.5em;
  }

  .inline {
    width: auto !important;
  }

  .highlight,
  .code {
    padding: 1px 15px;
    background-color: var(--code-background-color);
    color: var(--code-color);
    border-radius: 3px;
    margin-block-start: 1em;
    margin-block-end: 1em;
    overflow-x: auto;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: var(--visited-color);
  }

</style>



<script async src="https://www.googletagmanager.com/gtag/js?id=G-YCWP7TEBVS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-YCWP7TEBVS');
</script>






</head>

<body>
  <header><a href="/" class="title">
  <h2>logxin</h2>
</a>
<nav>
<a href="/">首页</a>

<a href="/posts/">文章</a>

<a href="/tags/">标签</a>

<a href="/about/">关于我</a>

</nav>
</header>
  <main>

<content>
  <h1 id="hugo-添加-giscus-评论保姆级教程基于-bearblog-主题">Hugo 添加 Giscus 评论保姆级教程（基于 Bearblog 主题）</h1>
<p>这篇文章手把手带你在 Hugo 博客里集成 Giscus（基于 GitHub Discussions 的评论系统）。</p>
<p>适用对象：使用 <code>hugo-bearblog</code> 主题或任意支持 <code>layouts/partials/custom_body.html</code> 扩展点的主题。</p>
<hr>
<h2 id="一准备工作一次性">一、准备工作（一次性）</h2>
<ol>
<li>
<p>打开 <code>https://giscus.app/zh-CN</code> 并使用 GitHub 登录。</p>
</li>
<li>
<p>安装 “giscus” GitHub App 到你的仓库（例如 <code>xin0712/logxin.cc</code>）。</p>
</li>
<li>
<p>在仓库启用 Discussions：</p>
</li>
</ol>
<ul>
<li>仓库 → Settings → General → Features → 勾选 “Discussions”。</li>
<li>仓库顶栏进入 “Discussions”，新建一个分类（推荐 “Q&amp;A” 或 “Comments”）。</li>
</ul>
<ol start="4">
<li>回到 giscus.app 页面：</li>
</ol>
<ul>
<li>仓库填 <code>xin0712/logxin.cc</code>，映射方式选 <code>pathname</code>。</li>
<li>分类选择刚创建的 &ldquo;Q&amp;A&rdquo;。</li>
<li>语言选中文，主题按需（建议 <code>preferred_color_scheme</code>）。</li>
<li>页面底部会生成一段 <code>&lt;script&gt;</code>，包含 <code>repoId</code>、<code>category</code>、<code>categoryId</code> 等参数。</li>
</ul>
<p>示例（请以你在 giscus.app 实际生成的为准）：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>&lt;<span style="color:#062873;font-weight:bold">script</span> <span style="color:#4070a0">src</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;https://giscus.app/client.js&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>        <span style="color:#4070a0">data-repo</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;xin0712/logxin.cc&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>        <span style="color:#4070a0">data-repo-id</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;R_kgDOPKWTCQ&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        <span style="color:#4070a0">data-category</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;Q&amp;A&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>        <span style="color:#4070a0">data-category-id</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;DIC_kwDOPKWTCc4CuqkD&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>        <span style="color:#4070a0">data-mapping</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;pathname&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>        <span style="color:#4070a0">data-strict</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>        <span style="color:#4070a0">data-reactions-enabled</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>        <span style="color:#4070a0">data-emit-metadata</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>        <span style="color:#4070a0">data-input-position</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;top&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>        <span style="color:#4070a0">data-theme</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;preferred_color_scheme&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>        <span style="color:#4070a0">data-lang</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;zh-CN&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>        <span style="color:#4070a0">data-loading</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;lazy&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>        <span style="color:#4070a0">crossorigin</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;anonymous&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>        <span style="color:#4070a0">async</span>&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>&lt;/<span style="color:#062873;font-weight:bold">script</span>&gt;
</span></span></code></pre></div><hr>
<h2 id="二在-hugo-配置中写入-giscus-参数">二、在 Hugo 配置中写入 Giscus 参数</h2>
<p>在站点配置 <code>hugo.toml</code> 增加：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>[params.giscus]
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>repo = <span style="color:#4070a0">&#34;xin0712/logxin.cc&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>repoId = <span style="color:#4070a0">&#34;R_kgDOPKWTCQ&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>category = <span style="color:#4070a0">&#34;Q&amp;A&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>categoryId = <span style="color:#4070a0">&#34;DIC_kwDOPKWTCc4CuqkD&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>mapping = <span style="color:#4070a0">&#34;pathname&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>strict = <span style="color:#40a070">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>reactionsEnabled = <span style="color:#40a070">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>emitMetadata = <span style="color:#40a070">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>inputPosition = <span style="color:#4070a0">&#34;top&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>theme = <span style="color:#4070a0">&#34;preferred_color_scheme&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>lang = <span style="color:#4070a0">&#34;zh-CN&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>loading = <span style="color:#4070a0">&#34;lazy&#34;</span>
</span></span></code></pre></div><hr>
<h2 id="三在主题模板中挂载评论脚本">三、在主题模板中挂载评论脚本</h2>
<p>大多数主题都在 <code>layouts/_default/baseof.html</code> 里通过 <code>{{ partial &quot;custom_body.html&quot; . }}</code> 预留扩展位。创建（或覆盖）文件：</p>
<p><code>layouts/partials/custom_body.html</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>{{- $isSingle := eq .Kind &#34;page&#34; -}}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>{{- $commentsOff := or (eq .Params.comments false) (eq .Site.Params.comments false) -}}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>{{- if and $isSingle (not $commentsOff) -}}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>  &lt;<span style="color:#062873;font-weight:bold">script</span> <span style="color:#4070a0">src</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;https://giscus.app/client.js&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>          <span style="color:#4070a0">data-repo</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.repo }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>          <span style="color:#4070a0">data-repo-id</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.repoId }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>          <span style="color:#4070a0">data-category</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.category }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>          <span style="color:#4070a0">data-category-id</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.categoryId }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>          <span style="color:#4070a0">data-mapping</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.mapping }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>          <span style="color:#4070a0">data-strict</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.strict }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>          <span style="color:#4070a0">data-reactions-enabled</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.reactionsEnabled }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>          <span style="color:#4070a0">data-emit-metadata</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.emitMetadata }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>          <span style="color:#4070a0">data-input-position</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.inputPosition }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>          <span style="color:#4070a0">data-theme</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.theme }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>          <span style="color:#4070a0">data-lang</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.lang }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>          <span style="color:#4070a0">data-loading</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;{{ .Site.Params.giscus.loading }}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>          <span style="color:#4070a0">crossorigin</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;anonymous&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>          <span style="color:#4070a0">async</span>&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>  &lt;/<span style="color:#062873;font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>  &lt;<span style="color:#062873;font-weight:bold">noscript</span>&gt;请启用 JavaScript 以查看评论&lt;/<span style="color:#062873;font-weight:bold">noscript</span>&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>{{- end -}}
</span></span></code></pre></div><p>说明：</p>
<ul>
<li>仅在文章页（<code>.Kind == &quot;page&quot;</code>）渲染评论。</li>
<li>可以在某篇文章前言里用 <code>comments = false</code> 关闭评论。</li>
</ul>
<hr>
<h2 id="四构建与部署">四、构建与部署</h2>
<p>本地构建：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>hugo --cleanDestinationDir
</span></span></code></pre></div><p>部署（示例脚本，SSH 走 443 端口，绕过代理）：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>bash ./deploy.sh
</span></span></code></pre></div><p>等待 GitHub Pages/CDN 生效（数十秒到数分钟），强制刷新浏览器查看。</p>
<hr>
<h2 id="五可选性能优化">五、可选性能优化</h2>
<ul>
<li>点击后再加载评论（推荐）：默认不注入脚本，点击“加载评论”按钮时再动态插入 <code>&lt;script&gt;</code>。</li>
<li>预连接域名（减少 TLS 时延），在 <code>&lt;head&gt;</code> 加入：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>&lt;<span style="color:#062873;font-weight:bold">link</span> <span style="color:#4070a0">rel</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;preconnect&#34;</span> <span style="color:#4070a0">href</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;https://giscus.app&#34;</span>&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>&lt;<span style="color:#062873;font-weight:bold">link</span> <span style="color:#4070a0">rel</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;preconnect&#34;</span> <span style="color:#4070a0">href</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;https://github.com&#34;</span>&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>&lt;<span style="color:#062873;font-weight:bold">link</span> <span style="color:#4070a0">rel</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;preconnect&#34;</span> <span style="color:#4070a0">href</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;https://api.github.com&#34;</span>&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>&lt;<span style="color:#062873;font-weight:bold">link</span> <span style="color:#4070a0">rel</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;preconnect&#34;</span> <span style="color:#4070a0">href</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;https://avatars.githubusercontent.com&#34;</span>&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>&lt;<span style="color:#062873;font-weight:bold">link</span> <span style="color:#4070a0">rel</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;dns-prefetch&#34;</span> <span style="color:#4070a0">href</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;https://giscus.app&#34;</span>&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>&lt;<span style="color:#062873;font-weight:bold">link</span> <span style="color:#4070a0">rel</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;dns-prefetch&#34;</span> <span style="color:#4070a0">href</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;https://github.com&#34;</span>&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>&lt;<span style="color:#062873;font-weight:bold">link</span> <span style="color:#4070a0">rel</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;dns-prefetch&#34;</span> <span style="color:#4070a0">href</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;https://api.github.com&#34;</span>&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>&lt;<span style="color:#062873;font-weight:bold">link</span> <span style="color:#4070a0">rel</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;dns-prefetch&#34;</span> <span style="color:#4070a0">href</span><span style="color:#666">=</span><span style="color:#4070a0">&#34;https://avatars.githubusercontent.com&#34;</span>&gt;
</span></span></code></pre></div><ul>
<li>收敛请求：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>data-emit-metadata=&#34;0&#34;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>data-reactions-enabled=&#34;0&#34;
</span></span></code></pre></div><hr>
<h2 id="六常见问题与排查">六、常见问题与排查</h2>
<ul>
<li>评论不显示：检查是否启用 Discussions、安装 giscus App、<code>repoId/categoryId</code> 是否正确。</li>
<li>首次加载慢：<code>github.com</code>/<code>api.github.com</code>/<code>avatars.githubusercontent.com</code> 等域名网络质量影响较大，可以采用“点击后加载评论”方案。</li>
<li>单篇文章关闭评论：前言加入 <code>comments = false</code>。</li>
</ul>
<hr>
<p>如果你希望，我可以提供一份“点击后再加载”的现成 partial，直接替换即可提升首屏速度。</p>

</content>
<p>
  
  <a href="https://logxin.cc/tags/hugo/">#Hugo</a>
  
  <a href="https://logxin.cc/tags/%E8%AF%84%E8%AE%BA/">#评论</a>
  
  <a href="https://logxin.cc/tags/giscus/">#Giscus</a>
  
  <a href="https://logxin.cc/tags/%E6%95%99%E7%A8%8B/">#教程</a>
  
</p>

  </main>
  <footer>Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a>
</footer>

  <script src="https://giscus.app/client.js"
          data-repo="xin0712/logxin.cc"
          data-repo-id="R_kgDOPKWTCQ"
          data-category="Q&amp;A"
          data-category-id="DIC_kwDOPKWTCc4CuqkD"
          data-mapping="pathname"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="1"
          data-input-position="top"
          data-theme="preferred_color_scheme"
          data-lang="zh-CN"
          data-loading="lazy"
          crossorigin="anonymous"
          async>
  </script>
  <noscript>请启用 JavaScript 以查看评论</noscript></body>

</html>
